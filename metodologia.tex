
\chapter{Materiais e Métodos}
\label{metodologia}
COLOCAR DESCRICAO DO CAPITULO Arqui

\section{Tecnologias utilizadas}
\label{tecnologias-usadas}

\subsection{Comunicação Wi-Fi e \emph{probe request}}

\subsection{Modo monitor}

\subsection{Tshark}

\subsection{Raspberry Pi}

\subsection{Node.js}

\subsection{MongoDB e M-Lab}

\subsection{Visualização de dados}

\section{Métodos e Etapas}
Como a aplicação foi desenvolvida, etc. etc.. ordem de desenvolvimento


\section{Dispositivo Móvel e \emph{Probe Request}}
\label{smartphone-probe}
Para encontrar redes a que possa se conectar, um dispositivo móvel emite de tempos em tempos (depende da fabricante) pacotes do tipo \emph{probe request} para os APs próximos \cite{Meraki}. Todos os APs que receberem, responderão ao dispositivo (\emph{probe response} ou \emph{received}), então o aparelho descobrirá as redes ao redor disponíveis para conexão.

\section{Sensor}
O sensor é responsável pela detecção de aparelhos e envio de dados ao servidor.

\subsection{Raspberry Pi}
Para a detecção de dispositivos móveis um Raspberry Pi Model 3 B juntamente com um adaptador Wi-Fi são utilizados. O Raspberry foi escolhido,
pois oferece interface amigável de programação (Kali Linux); possui poder de processamento para receber os milhares de pacotes, pré-processá-los
e enviar para o servidor; possui entrada USB pode receber uma antena Wi-Fi e seu tamanho pequeno \cite{rpi2017}.

Outras opções foram consideradas por serem baratas, acessíveis e terem documentação aberta. Foi o caso do ESP8266 que possui um tamanho extremamente
reduzido e possui o custo médio de R\$15,00 \cite{Embarcados2015}, mas seu uso para este trabalho fica impossibilitado. Isso
ocorre, pois essa tecnologia não consegue ser habilitada para o modo monitor da interface de rede \cite{Puhl2016} \cite{Ferreira2016}.

Uma antena Wi-Fi (Ralink MT7601U) foi equipada no Raspberry para ampliar o alcance da captura já que o propósito do sistema é detecção em zonas que podem
apresentar esparcidade de indivíduos (espalhados) e já que ela pôde ser habilitada para o modo monitor (\autoref{modo-monitor}). A antena nativa
do Raspberry não conseguiu ser habilitada para o \emph{monitor mode}.

\subsection{Kali Linux}
O sistema operacional Kali Linux \cite{kali} foi escolhido para o Raspberry Pi, pois possui ampla documentação
para uso em projetos de redes, além de ferramentas, como suporte a drivers de interfaces de rede que possam
ser habilitadas para o modo monitor, foi o caso do Ralink MT7601U.

\subsection{Tshark}
O protocolo Tshark é uma versão de terminal do protocolo
analisador de rede Wireshark \cite{Wireshark2017} \cite{Wireshark2017a}. Ele é
utilizado para analisar e filtrar (\emph{sniff}) e converter os dados dos
pacotes capturados pelo sensor em um arquivo. Esse protocolo foi
escolhido, pois permite realizar o estudo da rede a partir do recebimento de
pacotes e seus campos, além possuir ampla documentação, maturidade e exemplos
por ser uma tecnologia aberta.
